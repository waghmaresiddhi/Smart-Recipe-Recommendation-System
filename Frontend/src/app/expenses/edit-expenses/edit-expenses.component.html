<div class="edit-expense-container">
  <h2>Edit Expense</h2>

 
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Amount</th>
          <th>Category</th>
          <th>Date</th>
          <th>Description</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let expense of expenses$ | async">
          <td>{{ expense.amount | currency }}</td>
          <td>{{ expense.category }}</td>
          <td>{{ expense.date | date: 'shortDate' }}</td>
          <td>{{ expense.description || 'N/A' }}</td>
          <td>
            <button 
              class="btn btn-warning btn-sm edit-button" 
              (click)="editExpense(expense)">Edit</button>
            <button 
              class="btn btn-danger btn-sm delete-button" 
              (click)="deleteExpense(expense.id)">Delete</button> <!-- Add Delete Button -->
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <form [formGroup]="editExpenseForm" (ngSubmit)="onSubmitEdit()" *ngIf="isEditing">
    <div class="form-group">
      <label for="amount">Amount</label>
      <input
        id="amount"
        type="number"
        formControlName="amount"
        class="form-control"
        placeholder="Enter amount"
        [ngClass]="{ 'is-invalid': editExpenseForm.get('amount')?.invalid && editExpenseForm.get('amount')?.touched }" />
      <div *ngIf="editExpenseForm.get('amount')?.invalid && editExpenseForm.get('amount')?.touched" class="invalid-feedback">
        Please enter a valid amount.
      </div>
    </div>

    <div class="form-group">
      <label for="category">Category</label>
      <select
        id="category"
        formControlName="category"
        class="form-control"
        [ngClass]="{ 'is-invalid': editExpenseForm.get('category')?.invalid && editExpenseForm.get('category')?.touched }">
        <option value="" disabled>Select a category</option>
        <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
      </select>
      <div *ngIf="editExpenseForm.get('category')?.invalid && editExpenseForm.get('category')?.touched" class="invalid-feedback">
        Please select a category.
      </div>
    </div>

    <div class="form-group">
      <label for="date">Date</label>
      <input
        id="date"
        type="date"
        formControlName="date"
        class="form-control"
        [ngClass]="{ 'is-invalid': editExpenseForm.get('date')?.invalid && editExpenseForm.get('date')?.touched }" />
      <div *ngIf="editExpenseForm.get('date')?.invalid && editExpenseForm.get('date')?.touched" class="invalid-feedback">
        Please select a valid date.
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description (Optional)</label>
      <textarea
        id="description"
        formControlName="description"
        class="form-control"
        placeholder="Enter description"></textarea>
    </div>

    <div class="button-group">
      <button type="submit" class="btn btn-primary update-button" [disabled]="editExpenseForm.invalid">Update Expense</button>
      <button type="button" class="btn btn-secondary cancel-button" (click)="cancelEdit()">Cancel</button>
    </div>
  </form>

